{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Question Upload</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .sidebar {
            background-color: #343a40;
            height: 100vh;
            padding-top: 20px;
            color: white;
        }
        .sidebar a {
            color: white;
            text-decoration: none;
            padding: 10px;
            display: block;
        }
        .sidebar a.active {
            background-color: #0d6efd;
        }
        .widget {
            background-color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .navbar .btn {
            margin-right: 10px;
        }
        .profile-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }
        .progress {
            height: 25px;
        }
        .preview-section {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            {% include 'admin/sidebar.html' %}
            <!-- Main Content -->
            <main class="col-md-10 ms-sm-auto col-lg-10 px-md-4">
                <h2 class="my-3">Manual Question Upload</h2>

                <!-- Upload Form -->
                <div class="widget">
                    <h4>Upload Questions Manually</h4>
                    <form id="uploadForm">
                        <div class="mb-3">
                            <label for="questionText" class="form-label">Question Text</label>
                            <input type="text" class="form-control" id="questionText" placeholder="Enter the question text">
                        </div>
                        <div class="mb-3">
                            <label for="options" class="form-label">Options (comma-separated)</label>
                            <input type="text" class="form-control" id="options" placeholder="Enter options">
                        </div>
                        <div class="mb-3">
                            <label for="answer" class="form-label">Correct Answer</label>
                            <input type="text" class="form-control" id="answer" placeholder="Enter the correct answer">
                        </div>
                        <div class="mb-3">
                            <label for="tags" class="form-label">Tags (comma-separated)</label>
                            <input type="text" class="form-control" id="tags" placeholder="Enter tags">
                        </div>
                        <button type="submit" class="btn btn-primary">Add Question</button>
                    </form>
                </div>

                <!-- Bulk Upload -->
                <div class="widget">
                    <h4>Bulk Upload Questions</h4>
                    <form id="bulkUploadForm">
                        <div class="mb-3">
                            <label for="fileUpload" class="form-label">Upload CSV or Excel File</label>
                            <input type="file" class="form-control" id="fileUpload" accept=".csv, .xlsx">
                        </div>
                        <button type="submit" class="btn btn-success">Upload</button>
                    </form>
                    <div class="progress mt-3" style="display:none;" id="uploadProgress">
                        <div class="progress-bar" role="progressbar" style="width: 0%;" id="progressBar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="widget preview-section" id="previewSection">
                    <h4>Preview Questions</h4>
                    <table class="table table-bordered" id="previewTable">
                        <thead>
                            <tr>
                                <th>Question Text</th>
                                <th>Options</th>
                                <th>Answer</th>
                                <th>Tags</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preview rows will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Handle form submission and preview
        document.getElementById('uploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            // Simulate adding a question manually
            const questionText = document.getElementById('questionText').value;
            const options = document.getElementById('options').value;
            const answer = document.getElementById('answer').value;
            const tags = document.getElementById('tags').value;

            const table = document.getElementById('previewTable').getElementsByTagName('tbody')[0];
            const newRow = table.insertRow();
            newRow.insertCell(0).textContent = questionText;
            newRow.insertCell(1).textContent = options;
            newRow.insertCell(2).textContent = answer;
            newRow.insertCell(3).textContent = tags;

            // Clear the form
            document.getElementById('uploadForm').reset();
        });

        // Handle bulk file upload
        document.getElementById('bulkUploadForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('fileUpload').files[0];
            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            // Simulate file upload and progress
            const progress = document.getElementById('uploadProgress');
            const progressBar = document.getElementById('progressBar');
            progress.style.display = 'block';

            let progressValue = 0;
            const interval = setInterval(() => {
                progressValue += 10;
                progressBar.style.width = progressValue + '%';
                progressBar.textContent = progressValue + '%';
                if (progressValue >= 100) {
                    clearInterval(interval);
                    alert('Upload complete!');
                }
            }, 500); // Simulate progress every 500ms
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
